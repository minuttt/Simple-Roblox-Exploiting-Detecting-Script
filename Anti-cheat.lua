-- Create a function to check for exploitation
function checkForExploitation(player)
  -- Get the player's character and humanoid
  local character = player.Character
  local humanoid = character:FindFirstChild("Humanoid")
  if not humanoid then return end
  
  -- Check if the player is flying
  if character:FindFirstChild("HumanoidRootPart").Velocity.Y > 0 then
    -- If the player is flying, kick them
    player:Kick("Exploitation detected!")
    return
  end
  
  -- Check if the player is teleporting
  local lastPosition = humanoid.LastPosition
  local currentPosition = humanoid.RootPart.Position
  local distance = (lastPosition - currentPosition).Magnitude
  if distance > 10 then
    -- If the player is teleporting, kick them
    player:Kick("Exploitation detected!")
    return
  end
  
  -- Check if the player is moving when their health is 0
  if humanoid.Health == 0 and (humanoid.MoveDirection.X ~= 0 or humanoid.MoveDirection.Z ~= 0) then
    -- If the player is moving when their health is 0, kick them
    player:Kick("Exploitation detected!")
    return
  end
end

-- Connect the function to the player's character added event
game.Players.PlayerAdded:Connect(function(player)
  player.CharacterAdded:Connect(checkForExploitation)
end)
